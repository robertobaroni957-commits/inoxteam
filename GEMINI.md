# Inoxteam Project Overview

This project appears to be a web application developed for the "Inoxteam". It leverages Cloudflare Pages for hosting the frontend and Cloudflare Workers for backend API functionality, including user authentication and data management.

## Technologies Used

*   **Frontend:** HTML, CSS (with `sidebar.css`), JavaScript (with `sidebar.js`). The frontend includes pages for home, events, registration, classification, contacts, and a "mwt_page".
*   **Backend:** Cloudflare Workers (JavaScript modules) for API endpoints.
*   **Database:** Cloudflare D1 for data persistence (e.g., user authentication, scores).
*   **Authentication:**
    *   `bcryptjs` for secure password hashing and comparison.
    *   `jose` for JSON Web Token (JWT) generation and verification.
*   **Package Management:** npm (Node Package Manager) for managing project dependencies.

## Project Structure and Architecture

The project follows a structure common for Cloudflare Pages/Workers applications:

*   **Root Directory:** Contains static HTML pages, CSS, and JavaScript for the frontend (`home.html`, `eventi.html`, `registrazione.html`, `sidebar.css`, `sidebar.js`, etc.).
*   **`functions/` directory:** This directory contains the Cloudflare Worker functions that act as the backend API.
    *   `_middleware.js`: The entry point for the Cloudflare Worker, potentially handling global logic or routing.
    *   `api/login.js`: Handles user login, authenticating users against the D1 database and issuing JWTs.
    *   `api/register.js`: Manages new user registration, hashing passwords before storing them in D1.
    *   `api/scores.js`: Likely handles game scores or other numerical data related to users.
*   **`node/` directory:** (Further investigation needed to confirm its purpose, but could be related to local development utilities or additional backend logic).
*   **`wrangler.toml`:** Configuration file for Cloudflare Workers, defining database bindings (D1) and other worker settings.
*   **`package.json` / `package-lock.json`:** Defines project dependencies and scripts.

## Building and Running

### Installation

To set up the project locally, install the necessary Node.js dependencies:

```bash
npm install
```

### Local Development (Frontend & Workers)

**Frontend:**
The static HTML, CSS, and JavaScript files can be served locally using any simple web server (e.g., `npx http-server`).

**Cloudflare Workers:**
For local development and testing of the Cloudflare Workers, you would typically use the `wrangler` CLI.

*   **To run workers locally:**
    ```bash
    npx wrangler dev
    ```
    (Note: You might need to specify the entry point or adjust the `wrangler.toml` for local D1 database emulation/binding if not already configured.)

### Deployment

This project is designed for deployment on Cloudflare Pages and Cloudflare Workers:

*   **Frontend:** Deploy the static files to Cloudflare Pages.
*   **Backend Workers:** The `functions/` directory is automatically detected and deployed as Cloudflare Workers by Cloudflare Pages. Ensure your `wrangler.toml` is correctly configured for D1 database bindings and any required environment variables (e.g., `JWT_SECRET`).

## Development Conventions

*   **Code Style:** Standard JavaScript practices.
*   **Authentication:** Utilizes `bcryptjs` for password hashing and `jose` for JWTs.
*   **Database Interactions:** Uses Cloudflare D1 via the `env.DB` binding for all database operations within the Workers.
*   **Error Handling:** API endpoints provide JSON responses with appropriate HTTP status codes for errors and success.

## Troubleshooting

### Login Credential Issues

If you encounter "Credenziali non valide" (Invalid credentials) errors during login, especially in the Cloudflare Workers environment, consider the following:

*   **`bcryptjs` Compatibility:** Ensure `bcryptjs` (a pure JavaScript implementation) is used instead of `bcrypt-ts` or other native-binding `bcrypt` libraries within your Cloudflare Workers. Native `bcrypt` implementations are generally incompatible with the Cloudflare Worker runtime.
*   **Database Values:** Verify that `password_hash` values in your D1 database are correctly generated using `bcryptjs` during user registration.
*   **JWT Secret:** Confirm that `env.JWT_SECRET` is correctly set as a secret in your Cloudflare Worker environment. If missing, JWT generation will fail silently or with errors.

---
_Generated by Gemini_
